
# VPC in eu-west-1
module "vpc_config_eu_west_1" {
  source = "./modules/vpc"

  vpc_configs = {
    "ireland" = {
      core = {
        primary        = "{{ item.CorePriCIDR[0] }}"
        secondary      = "{{ item.CoreSecCIDR[0] }}"
        subnets_per_az = { public_subnets = {{ item.CorepublicSubnetsPerAZ }}, private_subnets = {{ item.CoreprivateSubnetsPerAZ }} }
        attach_igw     = {{ item.coreIgw | lower }}
      }
      edge = {
        primary        = "{{ item.EdgePriCIDR[0] }}"
        secondary      = "{{ item.EdgeSecCIDR[0] }}"
        subnets_per_az = { public_subnets = {{ item.EdgepublicSubnetsPerAZ }}, private_subnets = {{ item.EdgeprivateSubnetsPerAZ }} }
        attach_igw     = {{ item.edgeIgw | lower }}
      }
    }
  }
  azs_per_vpc = {{ item.azsperVPC }}

  tags = {
    Environment = "dev"
    Client      = "client-x"
  }
}

# Core VPC ID
output "core_vpc_id" {
  description = "Core VPC ID"
  value       = aws_vpc.core["ireland"].id
}

# Edge VPC ID
output "edge_vpc_id" {
  description = "Edge VPC ID"
  value       = aws_vpc.edge["ireland"].id
}

# Core private subnets
output "core_private_subnets" {
  description = "List of Core VPC private subnet IDs"
  value       = aws_subnet.core_private.*.id
}

# Edge public subnets
output "edge_public_subnets" {
  description = "List of Edge VPC public subnet IDs"
  value       = aws_subnet.edge_public.*.id
}